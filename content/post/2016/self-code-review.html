+++
tags  = []
title = "Self Code Review"
date  = "2016-08-30 15:33:05"
+++
<p>あるとき人事考課の自己評価に「自分はもうちょっと他人のコードをレビューした方がいい気がする」と書いたら、同僚の一人から「自己コードレビューから始めるとレビューの練習になるしレビュアの負担も減らせるよ」とフィードバックされた。タイポなどのへぼいミスが多い自分は耳が痛く、それ以来自己レビューをするようになった。</p><p>なぜかはわからないが、手元で diff を見るよりウェブのレビュー UI でコードを眺める方が間違いが見えやすい。自分は気の利いた diff ツールでなく素の git diff を使っているから、レビューツールの方が視界が広いのかもしれない。レビュー UI は気づいたことを逐一記録しておき後からまとめて直せるのも良い。自己レビューをはじめたあと改めて周りを見ると、チームの他の人々も同じことをしていた。</p><p>こうして初版パッチからはしょぼいエラーを減らすことができたのだが、指摘と修正のイテレーションを進めるにつれ段々とエラーが増えていく問題があることに気づいた。瑣末な、あるいは気に入らない指摘をされると不愉快さが募りコードが雑になる。この大人気なさをなんとかしたい。</p><p>言われた場所だけを直すかわりに何かを指摘するに至った背景について考え、コードをがばっと書き直す方が良い場合もある。指摘をうけるコードに何か良くない部分がある可能性は高い。けれど指摘の提案が正しい割合はもう少し低い。レビュアの臭覚は当てにしつつ、それ以上を期待せず自分でよく考え根本から直す。そんな態度でいる方が、細かい指摘をはいはいと直すより前向きになれる、こともある。</p>

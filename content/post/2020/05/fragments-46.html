+++
tags  = ["fragments"]
title = "Fragments #46"
date  = "2020-05-29 11:13:30"
+++
<p><!-- wp:heading -->
<h2>2020/05/29</h2>
<!-- /wp:heading --></p><p><!-- wp:list -->
<ul><li>めちゃプレッシャーをかけられており自宅残業。つらい。労働時間削減中の身分はこういう負荷のスパイクを吸収するバッファがないので運動を削るとか睡眠を削るといった形で対応せざるをえず、しかもそれが人々に伝わらないやばさ。自分のプロジェクトを進めているときには生産性がどうとかいろいろかっこいいことを言う余地があるが、他人の尻拭いをしてるとアウトプットで判断とかいうアイデアに殺意しか感じられない。マイナスをゼロにする仕事の生産性とは。そして性能仕事はわりかし本質的に他人の尻拭いなのである。</li><li>ようやくベンチマークが熱に負けなくなってきた。基本的には<a href="https://cs.android.com/androidx/platform/frameworks/support/+/androidx-master-dev:benchmark/gradle-plugin/src/main/resources/scripts/lockClocks.sh">これ</a>をパクれば良い。しかしクロック固定を解除するにはデバイスを再起動するほかなく、デバイス再起動すると自動化フレームワークが messed up されてしまう気がしており、辛い。今は colab なのでコケたら cell を再実行すればよいが、これ lab で自動化とかできんの？てかみんなどうしてんの？</li><li>ベンチマーク結果待ち時間ながすぎる・・・。ひとてまかけて colab に ProgressBar を統合しといてよかった。自分は社内のライブラリを使ったが、IPython API で<a href="https://stackoverflow.com/questions/46939393/how-do-i-use-updatable-displays-on-colab">簡単に実現できる模様</a>。</li></ul>
<!-- /wp:list --></p><p><!-- wp:heading -->
<h2>2020/05/28</h2>
<!-- /wp:heading --></p><p><!-- wp:list -->
<ul><li>Fragments を復活してみる試み。普通の記事を書く余裕ゼロのため。Wordpress 肝いりの new editor はマジでひどいなしかし。</li><li>Ubuntu 20.04, あまりに遅いので Fractional Scaling を切ってみる。マシになったが、一番（というか唯一）楽しみだった機能だけにがっかり・・・。</li><li>ベンチマーク業務。気温のせいかスコアがあまりに安定しないので渋々 CPU クロックを固定するワークアラウンドを入れたら・・・ちょう安定した！うおーい！disk cache drop を追加したとき以来の衝撃。必要なのはこれだったのか・・・。<ul><li>CPU のクロック固定は、バグがあるとデバイスを壊しそうなのが怖くてずっとやっていなかった。今回はデバイスの温度とベンチマークのスコアを並べて plot する、というデバッグをした結果、どうにも熱で性能低下しているっぽいと判断できたので踏み切れた。</li><li>性能が安定したのは、熱の影響を排除できたおかげのみならず、frequency governor の挙動の不確定性を排除できたのも大きい気がする。従来は謎の modality があった（多分必要なタイミングで clock を上げそびれる場合があった）のに、クロックを固定したら余計な mode がすっかり消えたからね。</li></ul></li></ul>
<!-- /wp:list --></p><p><!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph --></p>

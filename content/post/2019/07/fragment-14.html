+++
tags  = ["fragments"]
title = "Fragment #14"
date  = "2019-07-15 08:33:16"
+++
<p><h3>日曜日</h3></p><p><ul>
    <li>05:07. 完全出遅れな上に家庭の事情で leave me alone はなし。そういう時もある。
<ul>
    <li>せめて編集は終わらせないと。</li>
    <li> 自分のターン、今回は音も滑舌もほんとにひどい。Confort zone を超えてわかってない話をしている時はいっぱいっぱいで色々気を回すことが出来ないということがわかる。はさておき終了。</li>
    <li>そして stats をみると path tracing の話は人気ない。まあいいです。</li>
</ul>
</li>
    <li>お手紙送付業
<ul>
    <li>最近は書きたいことがない、わけではなく、なんか時間ない。書かずに溜め込むとストレスが貯まってよくないのだけれども・・・。たぶん time budgeting が乱れているせいで書く時間を作れていないのだろう。要見直し。</li>
    <li>この fragment は最低限のガス抜きにはなっており、初めて良かった感。</li>
</ul>
</li>
    <li>Santa Cruz の beach へ。これまでは北側に行くことが多かったが、今日はより人気のある南側にいってみる。湾の内側だからか北側より風が弱く、ビーチとしても整備されていて平和でよかった。</li>
</ul></p><p><h3>土曜日</h3></p><p><ul>
    <li>04:40. 編集.
<ul>
    <li>自分のターン、ボコボコいう音が入ってしまって残念。机によっかかっていたのだろうか・・・。</li>
</ul>
</li>
</ul></p><p><h3>金曜日</h3></p><p><ul>
    <li>05:22. 昨日は家族全体の就寝が遅く出遅れ. Podcast 準備おわんない...</li>
    <li>歯医者から午後出社。</li>
    <li>家で会社のメールを見たい（正確には送りたい）が余分な電話を持ち歩くのも嫌（充電面倒）だしラップトップを持ち歩くのも嫌（思い）ので会社が安い Chromebook を余分に支給してくれないか、と相談したら向井さんに「私物でも Chromebook なら会社ネットワークにつなげますよ」というので使っていなかった Chromebook Plus をひっぱりだして<a href="https://support.google.com/chrome/a/answer/1360534?hl=en">設定</a>してみる。会社のセキュリティ厳し過ぎでいろいろ面倒があったが、設定できた！めでたい。</li>
    <li>それはそれとして私物電話で dogfood しないとなあ・・・。</li>
    <li>オフィス引っ越しなのでいろいろ物理的な作業すなわち荷造りが必要。</li>
    <li>やたらフレンドリーな隣人の子（小学生）が親からもらったばかりと思しき Windows laptop をもって家の前にやってきた。Paint 3D でつくったものを自慢したいらしい。色々デモされる。Windows 10, こうしてみるとなかなか悪くなさそうじゃん。自分が Microsoft 社員だったら pround moment であろう。しかしいじってるうちに glitch が発生しはじめてリブートを強要されているあたり Windows であることよ。Microsoft のせいというよりは古い Asus laptop のせいだろうが。</li>
</ul></p><p><h3>木曜日</h3></p><p><ul>
    <li>04:04 起きたぞ
<ul>
    <li>Paper work やらんと。</li>
    <li>Note writing. 今週は若干不安あるが、そういう週もある。</li>
</ul>
</li>
    <li><a href="https://www.cnbc.com/2019/07/17/foreign-purchases-of-american-homes-plunge-36percent-as-chinese-buyers-flee.html">Foreign purchases of American homes plunge 36% as Chinese buyers flee</a>
<ul>
    <li>いいニュース・・・という扱いではないのか。</li>
</ul>
</li>
    <li><a href="https://petapixel.com/2019/07/17/amazon-accidentally-sold-13000-camera-gear-for-100-on-prime-day/">Amazon Accidentally Sold $13,000+ Camera Gear for $100 on Prime Day</a>
<ul>
    <li>ちゃんと出荷するところでむしろ株があがる Amazon さすが。</li>
</ul>
</li>
    <li>Twitter.com, なんか日本語入力壊れてるね。Buffer とか使うべきだろうか・・・。</li>
</ul></p><p><h3>水曜日</h3></p><p><ul>
    <li>04:58. アラーム直したら起きられず. ひとつ目のアラームを止めた記憶がぼんやりある. 30 分間隔のアラームを足すべきか...
<ul>
    <li>Paper reading. <a href="http://nitro.biosci.arizona.edu/courses/EEB596/handouts/Gibbs.pdf">Markov Chain Monte Carlo and Gibbs Sampling</a>. これ付け焼き刃でちょろっと読めるのだろうか...</li>
</ul>
</li>
    <li><a href="http://www.pbr-book.org">pbr-book</a> をにらみ直す。
<ul>
    <li>自分は Ordinal MC と MCMC の違いをよくわかっていなかったが、結果としては間違ったことは言っていない気がする。つまり素朴な path tracing は別に MCMC はしておらず、Ordinal MC すなわちランダムサンプリングだから。</li>
    <li>Ordinal MC は draw した sample の distribution が pdf というか p に従っていることを前提としているが、半球を uniform に sample するときこの前提は成り立つのか？</li>
    <li>というと、pdf 相当のものが入射光の強さに織り込まれているから大丈夫ということなんだろうね。</li>
    <li>つまり、マットで反射が拡散する素材の BRDF にでは出ていく光が減衰する、という事実が、確率分布を代替しているというか・・・。</li>
    <li>なぜ path tracing がいわゆる MC と違うかというと、Monte Carlo Integration が想定しているシミュレーションとしてレンダリングを捉えるなら、光源から光子を飛ばす、というのが一つの志向になるべきで、その光子が物質の表面でその特性にあわせて飛び回り、最終的にフィルムというかレンダリング結果に足し込まれる・・・ということを何度も何度も繰り返すのが素朴な物理的レンダリングというもの。</li>
    <li>この方法だと、反射方向を乱数で決める際に確率分布を反映すればよく、これが要するに Ordinal MC である。</li>
    <li>しかし path tracing では camera 側から ray を逆引きする、ということをしている。このときその ray がそもそもどの光源から来たかは表面特性/BRDF だけでは決まらず、入射光の分布 Li というものを考えないといけない。そしてこの Li はある意味で PDF そのものである・・・というか, PDF を織り込んでいる。</li>
    <li>ここでいう PDF は反射が発生しているマテリアルの PDF ではなく、入射光という現象の PDF である。入射光が強い = その方向から光子がやってくる確率が高い。</li>
    <li>つまり素朴な path tracing においては Ordinal MC が想定する "ある sample が draw される頻度" という形では入射光の PDF が表現されず、頻度は全角度一定だが Li という形でその角度の PDF がわかる。</li>
    <li>これは "PDF がわからなくても解ける" という MC の肝をガン無視している気がするが、そういうものを Monte Carlo integration と呼んでも良いのだろうか・・・という疑問はあるが、まあきっといいのでしょう・・・。</li>
    <li>なお PBRT の実装では素朴な path tracing と違い、BRDF がマテリアルの PDF というものを持っている。つまり素朴に半球全部に反射する必要はなく、BRDF の実装（シェーダ）が反射先をコントロールできる。これは specular reflection みたいに反射の向きが決定的な場合に無駄に半球全体をサンプリングせずに済むので便利。</li>
    <li>ただし、その際にシェーダはフレームワークである PBRT レンダラに反射先(というか入射光 wi) の PDF を返す必要がある。レンダラはこの PDF に応じてそのレイの寄与の weight を調整する。</li>
    <li>ちょっと腑に落ちた。おまえほんとに Monte Carlo を名乗って良いのかよォというところだけ納得いかないが、まあいいです。</li>
</ul>
</li>
    <li><a href="https://en.wikipedia.org/wiki/Monte_Carlo_integration">Monte Carlo integration - Wikipedia</a>
<ul>
    <li>h(x) 確率密度 p(x) とそれ以外 f(x) に分離する、ということは特に書いてない。よくわからん・・・。</li>
</ul>
</li>
    <li><a href="http://www.pbr-book.org/3ed-2018/Light_Transport_III_Bidirectional_Methods/Metropolis_Light_Transport.html">Metropolis Light Transport</a>
<ul>
    <li>更に睨むと・・・分布を cancel out するのか！すげえな。</li>
</ul>
</li>
</ul></p><p><h3>火曜日</h3></p><p><ul>
    <li>05:17. アラーム設定直し忘れて時間がない...
<ul>
    <li>Paper reading. <a href="https://graphics.pixar.com/library/Reyes/">Reyes</a></li>
    <li>CCI 6/32 というコンピュータが参照されているが<a href="http://gunkies.org/wiki/Power_6/32">まったく謎</a>。</li>
    <li>前回の podcast, 自分の Monte Carlo Integration への無理解が露呈している。MCMC とか何度勉強しても記憶から抜け落ちてしまうのは何なのだろうな・・・。Podcast を口実にもう一回復習する法が良いのではないか。</li>
</ul>
</li>
    <li>Mockito の verify() しか使っておらず一つも assert のないひどいテスト郡に出会う。Java のコードクオリティについて語り合う相手がいない悲しさはあるが、Java とかどうでもいいのも事実で、つまり日々どうでもいいコードを書いて暮らしているのか自分。</li>
    <li>うー金曜日に性能リグレッションがあったのにダッシュボードを見逃していた。アラートつけてくれー・・・。
<ul>
    <li>ぜったいおまえらだろというコミットを spot したが偏見はよくないのでベンチマークします・・・あとで・・・。</li>
</ul>
</li>
</ul></p><p><h3>月曜日</h3></p><p><ul>
    <li>04:57. 早起きしきれなかったせいかいまいちしゃきっとしない。最近 cosleep 中断中の影響で就寝が遅くなりだめだな。
<ul>
    <li>note.mu の writing を試しているが、autosave の notification がウザいし undo はぶっこわれてるし、ほんとダメだなこれ・・・。それにしても WordPress にしろ note.mu にしろ Medium のエディティングをぱくっており、オンラインの編集体験を破壊した Medium の罪を感じる。Medium のせいではないのだが・・・（Medium 自体のエディタは良いが、パクリ勢がだめ。)</li>
</ul>
</li>
    <li>案の定 fast が破綻している。やはり数値目標が必要ということで、電話機出るまでに under 60kg を目標とする。年末食べ過ぎに備えるぜ（願わくば）。</li>
    <li><a href="http://www.brendangregg.com/bpf-performance-tools-book.html">BPF Performance Tools (Book)</a>
<ul>
    <li>買うべき本が来た。</li>
</ul>
</li>
    <li>また一つ知っておくべき社内コマンドラインツールのオプションを身に着けた。</li>
    <li><a href="https://www.newyorker.com/tech/annals-of-technology/can-indie-social-media-save-us">Can “Indie” Social Media Save Us? | The New Yorker</a>
<ul>
    <li>Cal 氏の流行り物を我田引水するスキルの高さは microcelebrity の素質がありすぎて気の毒とすら言える。</li>
</ul>
</li>
    <li>むかし面接クイズ的なやつの過去問に「どうやってタイマーを実装しますか」みたいのがあり、「スレッドを作って sleep() します」が答えなのに絶望した遠い記憶があるのだが、そんな実装を仕事のコードに発見してしまい絶望が蘇る。きみら世の中にはイベントループというのがあってな・・・。書いたやつが誰か blame しようと一瞬思ったが心の平安のためやめておく。</li>
    <li><a href="https://www.amazon.com/dp/B07J31T4NC/">Amazon.com: Nod by Tuft &amp; Needle Queen Mattress</a>
<ul>
    <li>Tuft and Needle, もう薄い mattress は作っていないのかとおもったら Amazon 限定で売っているらしい。オンラインマットレス販売、引っ越してきた頃は目新しかった気がするけれど今や類似製品がやまほどある戦場になっている。</li>
    <li>マットレスはさておきオンライン単品売りブランドは細々と良い物があり好ましいので色々増えてほしいもんです。安いやつが。</li>
</ul>
</li>
</ul></p>
